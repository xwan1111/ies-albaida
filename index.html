<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>AI Image Chat Local</title>
<style>
body {margin:0;font-family:system-ui,Arial;display:flex;height:100vh;background:#343541;color:white;}
#sidebar {width:250px;background:#202123;padding:10px;overflow-y:auto;}
#sidebar button {width:100%;padding:10px;background:#19c37d;color:white;border:none;border-radius:6px;margin-bottom:10px;cursor:pointer;}
#chatList .chatItem {padding:10px;background:#2a2b32;margin-bottom:6px;border-radius:6px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;}
#chatList .chatItem:hover {background:#3a3b42;}
#main {flex:1;display:flex;flex-direction:column;}
#messages {flex:1;overflow-y:auto;padding:20px;}
.msg {max-width:70%;padding:12px;border-radius:10px;margin-bottom:12px;word-break:break-word;}
.user {background:#444654;margin-left:auto;}
.ai {background:#3a3b42;}
.images {display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;margin-top:10px;}
.images img {width:100%;border-radius:8px;}
#inputBar {background:#40414f;padding:10px;display:flex;gap:10px;}
input, select {padding:10px;border-radius:6px;border:none;flex:1;}
button {background:#19c37d;border:none;color:white;padding:10px 15px;border-radius:6px;cursor:pointer;}
</style>
</head>
<body>

<div id="sidebar">
<button onclick="newChat()">+ Nuevo chat</button>
<div id="chatList"></div>
</div>

<div id="main">
<div id="messages"></div>
<div id="inputBar">
<input id="prompt" placeholder="Escribe algo para generar im치genes">
<select id="style">
<option>realista</option>
<option>anime</option>
<option>arte</option>
<option>3d</option>
</select>
<select id="count">
<option>1</option>
<option>2</option>
<option>3</option>
<option>4</option>
</select>
<button id="sendBtn">Enviar</button>
</div>
</div>

<script>
// -------- VARIABLES --------
let chats = [{messages:[]}];
let current = 0;

// -------- RENDER CHATS --------
function renderChats(){
    chatList.innerHTML = "";
    chats.forEach((c,i)=>{
        const div = document.createElement("div");
        div.className = "chatItem";

        const span = document.createElement("span");
        span.textContent = "Chat " + (i+1);
        span.style.cursor="pointer";
        span.onclick = ()=>{ current = i; render(); };

        const delBtn = document.createElement("button");
        delBtn.textContent = "游딈";
        delBtn.style.background="red";
        delBtn.style.padding="2px 6px";
        delBtn.style.borderRadius="4px";
        delBtn.onclick = ()=>{
            chats.splice(i,1);
            if(current>=chats.length) current = chats.length-1;
            renderChats();
            render();
        };

        div.appendChild(span);
        div.appendChild(delBtn);
        chatList.appendChild(div);
    });
}

// -------- NUEVO CHAT --------
function newChat(){
    chats.push({messages:[]});
    current = chats.length-1;
    renderChats();
    render();
}

// -------- RENDER MENSAJES --------
function render(){
    messages.innerHTML = "";
    if(current<0) return;
    chats[current].messages.forEach(m=>{
        const div = document.createElement("div");
        div.className = "msg " + m.role;
        div.innerHTML = m.text;
        messages.appendChild(div);

        if(m.images){
            const grid = document.createElement("div");
            grid.className = "images";
            m.images.forEach(src=>{
                const img = document.createElement("img");
                img.src = src;
                grid.appendChild(img);
            });
            messages.appendChild(grid);
        }
    });
    messages.scrollTop = messages.scrollHeight;
}

// -------- GENERAR IM츼GENES SIMULADAS --------
function generateImages(promptText,count,style){
    const arr = [];
    for(let i=0;i<count;i++){
        // Picsum simula im치genes diferentes
        arr.push(`https://picsum.photos/seed/${encodeURIComponent(promptText+style+i)}/512`);
    }
    return arr;
}

// -------- ENVIAR MENSAJE --------
function send(){
    const text = prompt.value.trim();
    if(!text) return;
    chats[current].messages.push({role:"user",text});
    render();
    prompt.value="";

    const styleVal = style.value;
    const countVal = parseInt(count.value);

    chats[current].messages.push({role:"ai",text:"Generando im치genes..."});
    render();

    setTimeout(()=>{
        chats[current].messages.pop();
        const imgs = generateImages(text,countVal,styleVal);
        chats[current].messages.push({role:"ai",text:"Im치genes generadas:",images:imgs});
        render();
    }, 1000);
}

// -------- ENTER Y BOT칍N --------
prompt.addEventListener("keydown",e=>{
    if(e.key==="Enter") send();
});
document.getElementById("sendBtn").addEventListener("click", send);

// -------- INICIALIZAR --------
renderChats();
render();
</script>
</body>
</html>


